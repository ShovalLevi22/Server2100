<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!-- Generated by responder.co.il -->
</head>
<body>
    <script type="text/javascript">
        function responder_validation(form) {
            var inputs = form.getElementsByTagName('input');
            var selects = form.getElementsByTagName('select');
            var filter_email = /^([\w\!\#$\%\&\'\*\+\-\/\=\?\^\`{\|\}\~]+\.)*[\w\!\#$\%\&\'\*\+\-\/\=\?\^\`{\|\}\~]+@((((([a-z0-9]{1}[a-z0-9\-]{0,62}[a-z0-9]{1})|[a-z0-9])\.)+[a-z]{2,})|(\d{1,3}\.){3}\d{1,3}(\:\d{1,5})?)$/i;
            var filter_phone = /^(?:|(?:050|051|052|053|054|055|057|058|02|03|04|08|09)\d{7,7})$/;

            var lstSelected = document.getElementById("lst_selected")
            lstSelected.value = document.getElementById("example-select").value
            console.log(lstSelected.value)


            for (a=0; a<inputs.length; a++) {
                switch (inputs[a].name) {
                    case 'fields[subscribers_email]':
                        if (!filter_email.test(inputs[a].value)) {
                            alert('כתובת הדוא"ל אינה חוקית');
                            inputs[a].focus();
                            return false;
                        }

                        break;
                    case 'fields[subscribers_phone]':
                        var phone = inputs[a].value.replace(/-|\s/g, '');
                        if (!filter_phone.test(phone.length==0 || phone.charAt(0)=='0' ? phone : '0' + phone)) {
                            alert('מספר הטלפון הנייד אינו חוקי');
                            inputs[a].focus();
                            return false;
                        }

                        break;
                }
            }

            for (a=0; a<selects.length; a++) {
                switch (selects[a].name) {
                }
            }

            if (document.charset)
                form.encoding.value = document.charset;
            else if (document.defaultCharset)
                form.encoding.value = document.defaultCharset;
            else if (document.characterSet)
                form.encoding.value = document.characterSet;

            if (navigator.userAgent.indexOf(';FBAV/') > -1) {
                form.target = '_self';
            }

            return true;
        }

        function get_options(){
            var date = new Date();
            var day = date.getDay();
            var hour = date.getHours();
            var selections = [];
            // monday = 1
            if((day == 0 && hour<20 ) || (day == 2 && hour>20) || (day>2)) {
                var dateTxt = calcDate(day,1)
                selections.push(['שני ('+dateTxt+') בשעה 17:00', '1550511'])
            }

            // thursday = 4
            if((day == 2 && hour<20 ) || (day == 5 && hour>=10) || !(6>day&&day>1)) {
                var dateTxt = calcDate(day,4)
                selections.push(['חמישי ('+dateTxt+') בשעה 18:00', '1550511'])
            }


            // saturday = 6
            if((day == 5 && hour<10 ) || (day == 0 && hour>20) || (5>day>1)) {
                var dateTxt = calcDate(day,6)
                selections.push(['מוצ"ש ('+dateTxt+') בשעה 20:00', '1550511'])
            }

            return selections
        }

        function calcDate(today,target){

            var futureDate = new Date();
            var daysDis;
            if(today>target){
                daysDis = 7 - (today-target);
            }
            else {
                daysDis = target - today;
            }

            futureDate.setDate(futureDate.getDate() + daysDis);
            var dateTxt = futureDate.getDate()+'.'+ (futureDate.getMonth()+1) // month count starts from 0

            return dateTxt

        }


    </script>

    <style>
        body {
            text-align: center;


        }
        form{
            padding: 10px;
            display: inline-block;
            direction: rtl;
            font-family: "Segoe UI";
        }
        table{
            display: inline-block;

        }

        input,select, button{
            padding: 10px;
            margin: 1%;
            width: 100%;
            min-width:380px;
            max-width: 500px;
            display: inline-block;
            font-family: "Segoe UI";
            border-radius: 5px;
            border: 0.1px solid lightgrey;
            box-shadow:inset 0 2px 3px #F0F0F0, 2px 2px 2px #F0F0F0 ;
        }
        @media (min-width: 320px) and (max-width: 480px) {

            input,select, button{
                padding: 10px;
                margin: 1%;
                width: 100%;
                min-width:300px;

            }
        }

        select{
            font-weight: bold;
        }

        .submit-btn{
            background-color: limegreen;
            color: white;
            font-size: 2.9vw;
            font-weight: bold;
            box-shadow: inset 0 0px 0px #F0F0F0, 2px 2px 2px #F0F0F0;

        }
        @media (min-width: 1025px){
            .submit-btn{
                font-size: 42px;
            }
        }

        .step2{
            display: none;
        }

        td input.invalid {
            background-color: #ffdddd;
        }

        .hide{
            display: none;
        }
        .bold-red{
            font-size: 2vw;
            color: red;
            font-weight: bold;
        }
        .bold{
            font-size: 3vw;
            font-weight: bold;
        }
        label{
            font-size: 2vw;
            font-weight: normal;
        }

        /*
          ##Device = Laptops, Desktops
          ##Screen = B/w 1025px to 1280px
        */
        @media (min-width: 1025px)  {

            .bold-red{
                font-size: 24px;
                color: red;
                font-weight: bold;
            }
            .bold{
                font-size: 24px;
                font-weight: bold;
            }
            label{
                font-size: 18px;
                font-weight: normal;
            }
        }

        @media (min-width: 320px) and (max-width: 480px) {

            .bold-red{
                font-size: 3.7vw;
            }
            .bold{
                font-size: 3.7vw;
            }
            label{
                font-size: 3vw;
            }

        }


    </style>
    <form method="post" action="https://subscribe.responder.co.il" onsubmit="return responder_validation(this);">
<!--        text for step 1        -->
        <p class="step1 bold">מועבר באינטרנט - כל מה שצריך זה לבחור תאריך:</p>
<!--        text for step 2        -->
        <p class="step2 bold-red">לאן לשלוח לך את קישור הכניסה לסמינר?</p>
        <table border="0" dir="rtl">
            <tbody>
                <tr>
                    <td><select id="example-select" class="step1"></select></td>
                    <script>
                        var select = document.getElementById("example-select");
                        var options = get_options()
                        options.forEach(op=> {
                            select.options[select.options.length] = new Option(op[0], op[1]);
                        })

                    </script>

                </tr>
                <tr>
                    <td><input id="name" class="step1" type="text" name="fields[subscribers_name]"  dir="rtl" placeholder="שם"/></td>
                </tr>

                <tr>
                    <td><button type="button" id="nextBtn" class="step1 submit-btn" onclick="validateStep1()">המשך &#8592;</button></td>
                </tr>


                <tr>
                    <td><input id="email" class="step2" type="text" name="fields[subscribers_email]"  dir="ltr" placeholder="דואר אלקטרוני" /></td>
                </tr>
                <tr>
                    <td><input id="phone" class="step2" type="text" name="fields[subscribers_phone]"  dir="ltr" placeholder="טלפון נייד"/></td>
                </tr>

                <tr>
                    <td colspan="2">
                        <input type="hidden" name="form_id" id="lst_selected" />
                        <input type="hidden" name="encoding" value="" />
                        <input id="submit-btn" class="step2 submit-btn" type="submit" value="לחץ כאן להרשמה" />
                    </td>
                </tr>
                <tr>
                    <td>
                        <input type="checkbox" class="step2" name="vehicle1" value="check" checked required> <br>
                        <label for="vehicle1"  class="step2"> כן, אני מבין שעל מנת להיות נוכח בסמינר עליי לאשר קבלת מיילים וסמסים לגישה לשידור ותכנים נוספים.</label><br>
                        <!--        text for step 2        -->
                        <p class="step2 bold-red">חשוב - מספר המקומות מוגבל ל-501 נרשמים. קישור לכניסה יגיע במייל, אז חשוב להכניס אחד תקין :)</p>
                    </td>
                </tr>
            </tbody>

            <script>
                var currentStep = 1; // Current tab is set to be the first tab (1)
                showSteps(currentStep)

                function showSteps(step){
                    if(step == 1) {
                        var x = document.getElementsByClassName("step1");
                        for (i = 0; i < x.length; i++){
                            x[i].style.display = "block";
                        }
                    }
                    else {
                        var x = document.getElementsByClassName("step1");
                        for (i = 0; i < x.length; i++){
                            x[i].style.display = "none";
                        }
                        var y = document.getElementsByClassName("step2");
                        for (i = 0; i < y.length; i++){
                            y[i].style.display = "block";
                        }
                    }
                }

                function validateStep1() {
                    // This function deals with validation of the form fields
                    var x, y, i, valid = true;
                    // y = document.getElementsByClassName("step"+currentStep);
                    y = document.getElementById("name");
                        if (y.value == "") {
                            alert('יש למלא שם לפני המשך ההרשמה');
                            // and set the current valid status to false:
                            valid = false;
                        }

                    // If the valid status is true, mark the step as finished and valid:
                    if (valid) {
                        currentStep += 1;
                        showSteps(2)
                    }
                    return valid; // return the valid status
                }
            </script>
        </table>
    </form>

</body>
</html>



